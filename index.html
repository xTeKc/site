<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Wasm Project</title>

    <script type="module">
        import * as wasm from "./pkg/wasm_site.js";
      
        wasm.default().then((module) => {
          wasm.char_example("R");
          wasm.string_example("Jane");
          wasm.str_example("John");
          wasm.number_example(28);
          wasm.mixed_array_example([2, null, undefined, "Hola", true]);
          wasm.typed_array_example([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);
          wasm.option_example();
          wasm.result_example();
        });
      </script>

<script type="module">
    import * as wasm from "./pkg/wasm_site.js";
  
    wasm.default().then((module) => {
      // Enum \\
      let rustEnum = wasm.ExampleEnum.Yes;
      console.log(wasm.verify_enum_choice(rustEnum));
  
      // Struct \\
      let rustStruct = wasm.ExampleStruct.new(6);
      console.log(rustStruct); // this will contain a pointer
      console.log(rustStruct.value);
  
      rustStruct.write_method(200);
      console.log(rustStruct.read_method());
  
      let newRustStruct = rustStruct.transfer_ownership();
      rustStruct.read_method(); // rustStruct is now invalid. An error will throw.
    });
  </script>

  <!--
  For simplicity, we'll add a class declaration to the global namespace.
  The goal, from rust, is to create this class, call a method, and get/set a property.
-->
<script>
    class Coordinate {
      constructor(x, y) {
        this.x = x;
        this.y = y;
      }
  
      printValues() {
        return `(x:${this.x} y:${this.y})`;
      }
    }
  </script>
  
  <script type="module">
    import * as wasm from "./pkg/wasm_site.js";
  
    wasm.default().then((module) => {
      wasm.manual_bindings_example();
    });
  </script>

  </head>

  <body>
    <script type="module">
      // Importing WASM for the web target requires us to call an init function provided by the default module export.
      // This is planned to be changed in the future.
      import { default as wasm, greet } from "./pkg/wasm_site.js";

      wasm().then((module) => {
        // The boiler plate project comes with a `greet` function that calls:
        // `alert("Hello, wasm-site!");`
        greet();
      });
    </script>
  </body>
</html>